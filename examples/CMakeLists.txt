# ================================================================
# Rune Caster ì˜ˆì œ ì½”ë“œ ë¹Œë“œ ì„¤ì •
# ================================================================
#
# ì´ íŒŒì¼ì€ Rune Caster ë¼ì´ë¸ŒëŸ¬ë¦¬ì˜ í•µì‹¬ ì˜ˆì œë“¤ì„ ë¹Œë“œí•˜ê¸° ìœ„í•œ
# CMake ì„¤ì •ì„ ì œê³µí•©ë‹ˆë‹¤.
#
# ì˜ˆì œ êµ¬ì„±:
# - ê¸°ì´ˆ ì˜ˆì œ: Rune ë° RuneSequence ê¸°ë³¸ ì‚¬ìš©ë²•
# - ìŠ¤í  ì˜ˆì œ: í…ìŠ¤íŠ¸ ì²˜ë¦¬ ë° ë³€í™˜ ê¸°ëŠ¥
# - íŒŒì´í”„ë¼ì¸ ì˜ˆì œ: ê³ ê¸‰ ì²´ì´ë‹ ë° ì›Œí¬í”Œë¡œìš°
# ================================================================

# ê³µí†µ ì»´íŒŒì¼ ì˜µì…˜ ì„¤ì •
set(EXAMPLE_COMPILE_OPTIONS)
set(EXAMPLE_LINK_LIBRARIES rune_caster)

# MSVC íŠ¹ë³„ ì„¤ì • (UTF-8 ì§€ì›)
if(CMAKE_CXX_COMPILER_ID STREQUAL "MSVC")
    list(APPEND EXAMPLE_COMPILE_OPTIONS /utf-8 /wd4819)
    message(STATUS "MSVC UTF-8 support enabled for examples")
endif()

# ================================================================
# í•µì‹¬ ì˜ˆì œë“¤ (Core Examples)
# ================================================================

# ê¸°ë³¸ Rune ì‚¬ìš©ë²•
add_executable(basic_usage basic_usage.cpp)
target_compile_options(basic_usage PRIVATE ${EXAMPLE_COMPILE_OPTIONS})
target_link_libraries(basic_usage PRIVATE ${EXAMPLE_LINK_LIBRARIES})
set_target_properties(basic_usage PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/examples"
    CXX_STANDARD 20
    CXX_STANDARD_REQUIRED ON
)

# RuneSequence ì‚¬ìš©ë²•
add_executable(sequence_usage sequence_usage.cpp)
target_compile_options(sequence_usage PRIVATE ${EXAMPLE_COMPILE_OPTIONS})
target_link_libraries(sequence_usage PRIVATE ${EXAMPLE_LINK_LIBRARIES})
set_target_properties(sequence_usage PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/examples"
    CXX_STANDARD 20
    CXX_STANDARD_REQUIRED ON
)

# ìŠ¤í  ì‹œìŠ¤í…œ ë°ëª¨
add_executable(spell_demo spell_demo.cpp)
target_compile_options(spell_demo PRIVATE ${EXAMPLE_COMPILE_OPTIONS})
target_link_libraries(spell_demo PRIVATE ${EXAMPLE_LINK_LIBRARIES})
set_target_properties(spell_demo PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/examples"
    CXX_STANDARD 20
    CXX_STANDARD_REQUIRED ON
)

# ì¼€ì´ìŠ¤ ë³€í™˜ ì‚¬ìš©ë²•
add_executable(case_converter_usage case_converter_usage.cpp)
target_compile_options(case_converter_usage PRIVATE ${EXAMPLE_COMPILE_OPTIONS})
target_link_libraries(case_converter_usage PRIVATE ${EXAMPLE_LINK_LIBRARIES})
set_target_properties(case_converter_usage PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/examples"
    CXX_STANDARD 20
    CXX_STANDARD_REQUIRED ON
)

# ìºìŠ¤í„° íŒŒì´í”„ë¼ì¸ ë°ëª¨
add_executable(caster_pipeline_demo caster_pipeline_demo.cpp)
target_compile_options(caster_pipeline_demo PRIVATE ${EXAMPLE_COMPILE_OPTIONS})
target_link_libraries(caster_pipeline_demo PRIVATE ${EXAMPLE_LINK_LIBRARIES})
set_target_properties(caster_pipeline_demo PROPERTIES
    RUNTIME_OUTPUT_DIRECTORY "${CMAKE_BINARY_DIR}/examples"
    CXX_STANDARD 20
    CXX_STANDARD_REQUIRED ON
)

# ================================================================
# í†µí•© íƒ€ê²Ÿ ì„¤ì •
# ================================================================

# ëª¨ë“  ì˜ˆì œë¥¼ ë¹Œë“œí•˜ëŠ” í†µí•© íƒ€ê²Ÿ
add_custom_target(examples_all
    DEPENDS
        basic_usage
        sequence_usage
        spell_demo
        case_converter_usage
        caster_pipeline_demo
    COMMENT "Building all Rune Caster examples"
)

# ë¹Œë“œ í›„ ë©”ì‹œì§€
add_custom_command(TARGET examples_all POST_BUILD
    COMMAND ${CMAKE_COMMAND} -E echo ""
    COMMAND ${CMAKE_COMMAND} -E echo "ğŸ‰ All Rune Caster examples built successfully!"
    COMMAND ${CMAKE_COMMAND} -E echo "ğŸ“‚ Examples located at: ${CMAKE_BINARY_DIR}/examples"
    COMMAND ${CMAKE_COMMAND} -E echo ""
    COMMAND ${CMAKE_COMMAND} -E echo "ğŸ“‹ Available examples:"
    COMMAND ${CMAKE_COMMAND} -E echo "  - basic_usage: Rune class fundamentals"
    COMMAND ${CMAKE_COMMAND} -E echo "  - sequence_usage: RuneSequence container operations"
    COMMAND ${CMAKE_COMMAND} -E echo "  - spell_demo: Comprehensive spell system showcase"
    COMMAND ${CMAKE_COMMAND} -E echo "  - case_converter_usage: Text case transformation"
    COMMAND ${CMAKE_COMMAND} -E echo "  - caster_pipeline_demo: Advanced pipeline workflows"
    COMMAND ${CMAKE_COMMAND} -E echo ""
    COMMAND ${CMAKE_COMMAND} -E echo "ğŸš€ Run examples from the build directory:"
    COMMAND ${CMAKE_COMMAND} -E echo "  ./examples/basic_usage"
    COMMAND ${CMAKE_COMMAND} -E echo ""
)

# ================================================================
# ë””ë²„ê·¸ ì •ë³´
# ================================================================

if(CMAKE_BUILD_TYPE STREQUAL "Debug")
    message(STATUS "Examples will be built with debug information")
    target_compile_definitions(basic_usage PRIVATE RUNE_CASTER_DEBUG=1)
    target_compile_definitions(sequence_usage PRIVATE RUNE_CASTER_DEBUG=1)
    target_compile_definitions(spell_demo PRIVATE RUNE_CASTER_DEBUG=1)
    target_compile_definitions(case_converter_usage PRIVATE RUNE_CASTER_DEBUG=1)
    target_compile_definitions(caster_pipeline_demo PRIVATE RUNE_CASTER_DEBUG=1)
endif()

# ================================================================
# ì„¤ì¹˜ ì„¤ì • (ì„ íƒì )
# ================================================================

if(RUNE_CASTER_INSTALL_EXAMPLES)
    install(TARGETS
        basic_usage
        sequence_usage
        spell_demo
        case_converter_usage
        caster_pipeline_demo
        RUNTIME DESTINATION examples
        COMPONENT examples
    )

    install(FILES README.md
        DESTINATION examples
        COMPONENT examples
    )

    message(STATUS "Examples will be installed to: ${CMAKE_INSTALL_PREFIX}/examples")
endif()

message(STATUS "Configured ${CMAKE_CURRENT_LIST_DIR} with 5 core examples")
message(STATUS "Build all examples with: make examples_all")